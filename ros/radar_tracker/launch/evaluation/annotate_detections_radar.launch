<?xml version="1.0" ?>
<launch>
  <!-- params -->
  <param name="readbag_filename" value="/catkin_ws/data/0_multiposes.bag" />
  <param name="savebag_filename" value="/catkin_ws/data/0_multiposes_annotated.bag" />
  <param name="radar_scan_topic" value="/isdrc_driver_right/ScanCloudRaw" />
  <param name="fixed_frame" value="radar_right" />
  <param name="laser_scan_topic" value="/summit_xl/front_laser/scan" />
<!--  <param name="radar_scan_topic" value="/isdrc_driver_left/ScanCloudRaw" />
  <param name="fixed_frame" value="radar_left" />
  <param name="laser_scan_topic" value="/summit_xl/rear_laser/scan" />-->
  <param name="image_topic" value="/summit_xl/front_rgbd_camera/rgb/image_rect_color" />
<!--  <param name="image_topic" value="/camera1/rgb/image_rect_color" />-->

  <param name="detection_topic" value="/bkgd_cluster_positions" /> <!--/leg_cluster_positions or /squat_cluster_positions or /bkgd_cluster_positions-->

  <!-- run rviz -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find annotate_rosbags)/rviz/annotate_rosbags_radar.rviz"/>

  <!-- load a dummy map. Otherwise can't register clicked points in rviz -->
  <node name="map_server" pkg="map_server" type="map_server" args="$(find annotate_rosbags)/map/map.yaml"> 
    <param name="frame_id" value="radar_right" />
<!--    <param name="frame_id" value="radar_left" />-->
  </node>

   <!-- run detector to display valid clusters of sufficient size in the current frame -->
   <node pkg="radar_squat_leg_tracker" type="otsu_filter" name="otsu_filter" output="screen">
     <rosparam command="load" file="$(find radar_squat_leg_tracker)/config/otsu_filter_config.yaml"/>
   </node>

   <node pkg="radar_squat_leg_tracker" type="human_detector_node" name="radar_human_detector" output="screen">
     <rosparam command="load" file="$(find radar_squat_leg_tracker)/config/human_detector_config.yaml" subst_value="true" />
   </node>
  
  <!-- run annotate_rosbags -->
  <node pkg="annotate_rosbags" type="annotate_rosbags_detections_radar.py" name="annotate_rosbags_detections" output="screen" required="true"/>

</launch>

